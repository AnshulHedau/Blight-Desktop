<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="description" content="">
    <meta name="author" content="">
    <title>Register</title>
    <!-- Bootstrap core CSS-->
    <link href="vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet">
    <!-- Custom fonts for this template-->
    <link href="vendor/font-awesome/css/font-awesome.min.css" rel="stylesheet" type="text/css">
    <!-- Custom styles for this template-->
    <link href="css/sb-admin.css" rel="stylesheet">
    <script src="https://www.gstatic.com/firebasejs/4.11.0/firebase.js"></script>
    <script>
        // Initialize Firebase
        var config = {
            apiKey: "AIzaSyBbGWcyla5IKW8s6M7IRhne2d02QzGOYmw",
            authDomain: "blight-c675c.firebaseapp.com",
            databaseURL: "https://blight-c675c.firebaseio.com",
            projectId: "blight-c675c",
            storageBucket: "blight-c675c.appspot.com",
            messagingSenderId: "286025009005"
        };
        firebase.initializeApp(config);
        var database = firebase.database();
    </script>
    <script type="text/javascript">
        firebase.auth().signOut().then(function() {
            // Sign-out successful.
        }).catch(function(error) {
            // An error happened.
        });

        function log() {
            var name = document.getElementById("InputName").value;
            var email = document.getElementById("InputEmail1").value;
            var pass = document.getElementById("InputPassword1").value;
            var pass1 = document.getElementById("ConfirmPassword").value;
            var address = document.getElementById("InputAddress1").value;
            var region = document.getElementById("Region").value;
            var contact = document.getElementById("Contact").value;
            var lat = document.getElementById("Latitude").value;
            var lon = document.getElementById("Longitude").value;


            firebase.auth().createUserWithEmailAndPassword(email, pass)
                .then(function() {
                    alert("Registration Successful");
                    var userId = firebase.auth().currentUser.uid;
                    writeUserData(name, email, pass, userId, address, region, contact, lat, lon);

                    function writeUserData(name, email, pass, userId, address, region, contact, lat, lon) {
                        firebase.database().ref('rescueworkers/' + userId).set({
                            username: name,
                            email: email,
                            pass: pass,
                            address: address,
                            region: region,
                            contact: contact,
                            lat: lat,
                            lon: lon
                        });
                    }

                })
                .catch(function(error) {
                    var errorCode = error.code;
                    var errorMessage = error.message;
                    alert(errorCode + " : " + errorMessage);

                })
        }
    </script>
</head>

<body class="bg-dark">
    <div class="container">
        <div class="card card-register mx-auto mt-5">
            <div class="card-header">
                <h2><b>Rescue Team Registrations</b></h2>
            </div>
            <div class="card-body">
                <form onsubmit="Register()">
                    <div class="form-group">
                        <div class="form-row">
                            <div class="col-md-12">
                                <label for="InputName"><b>Name of Rescue Team</b></label>
                                <input class="form-control" id="InputName" type="text" placeholder="Enter Name of Rescue Team" autocomplete='name'>
                            </div>
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="InputEmail1"><b>Email address</b></label>
                        <input class="form-control" id="InputEmail1" type="email" placeholder="Enter email" autocomplete='name'>
                    </div>
                    <div class="form-group">
                        <div class="form-row">
                            <div class="col-md-6">
                                <label for="InputPassword1"><b>Password</b></label>
                                <input class="form-control" id="InputPassword1" type="password" placeholder="Password">
                            </div>
                            <div class="col-md-6">
                                <label for="ConfirmPassword"><b>Confirm password</b></label>
                                <input class="form-control" id="ConfirmPassword" type="password" placeholder="Confirm password">
                            </div>
                        </div>
                    </div>
                    <div class="form-group">
                        <div class="form-row">
                            <div class="col-md-6">
                                <label for="Latitude"><b>Latitude</b></label>
                                <input class="form-control" id="Latitude" type="text" placeholder="Latitude">
                            </div>
                            <div class="col-md-6">
                                <label for="Longitude"><b>Longitude</b></label>
                                <input class="form-control" id="Longitude" type="text" placeholder="Longitude">
                            </div>
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="InputAddress1"><b>Full Address</b></label>
                        <input class="form-control" id="InputAddress1" type="text" placeholder="Enter Address">
                    </div>
                    <div class="form-group">
                        <div class="form-row">
                            <div class="col-md-6">
                                <label for="Region"><b>Region</b></label>
                                <input class="form-control" id="Region" type="text" placeholder="Enter Region" autocomplete='name'>
                            </div>
                            <div class="col-md-6">
                                <label for="Contact"><b>Contact Number</b></label>
                                <input class="form-control" id="Contact" type="text" placeholder="Enter Contact Number" autocomplete='name'>
                            </div>
                        </div>
                    </div>
                    <br>
                </form>
                <div class="form-row">
                    <div class="col-md-3">

                    </div>
                    <div class="col-md-6 col-md-offset-6">
                        <input class="btn btn-primary btn-block" type="submit" value="Register" onclick="log()">
                    </div>
                </div>

                <div class="text-center">
                    <a class="d-block small mt-3" href="login.html">Login Page</a>
                </div>
            </div>
        </div>
    </div>
    <!-- Bootstrap core JavaScript-->
    <script src="vendor/jquery/jquery.min.js"></script>
    <script src="vendor/bootstrap/js/bootstrap.bundle.min.js"></script>
    <!-- Core plugin JavaScript-->
    <script src="vendor/jquery-easing/jquery.easing.min.js"></script>
</body>

</html>
